(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8878],{89238:function(a,e,n){Promise.resolve().then(n.bind(n,8748))},8748:function(a,e,n){"use strict";n.r(e);var t=n(57437),s=n(2265),r=n(29501),i=n(69291),l=n(41954),g=n(48357),d=n(49089),u=n(71257);let m=new(n(65596)).C;e.default=a=>{let{params:e}=a,[n,c]=(0,s.useState)(!1),o=e.id_pkpt,[p,b]=(0,s.useState)(""),{teamMembers:h,addTeamMember:j,removeTeamMember:k,resetTeamMembers:x}=(0,g.A)(),{data:w,isLoading:P,error:T}=(0,u.f)("pkpt",o),{register:L,handleSubmit:f,reset:y,watch:J,setValue:v}=(0,r.cI)(),N=J("PenanggungJawab"),_=J("WakilPenanggungJawab"),S=J("Supervisor"),M=J("KetuaTIM"),A=J("ATim"),R=[{value:"LHP",title:"LHP"},{value:"LHA",title:"LHA"},{value:"LHM",title:"LHM"},{value:"LHE",title:"LHE"},{value:"LHR",title:"LHR"}];if((0,s.useEffect)(()=>{let a=0;N&&(a+=Number(N)||0),_&&(a+=Number(_)||0),S&&(a+=Number(S)||0),M&&(a+=Number(M)||0),A&&(a+=Number(A)||0),v("Jumlah",a)},[N,_,S,M,A,v]),(0,s.useEffect)(()=>{if(w){var a;let[e,n]=w.jumlah_laporan.split(" - ");y({JenisPengawasan:w.jenis_pengawasan,AreaPengawasan:w.area_pengawasan,RuangLingkup:w.ruang_lingkup,TujuanSasaran:w.tujuan_sasaran,RencanaPenugasan:w.rencana_penugasan,RencanaPenerbitan:w.rencana_penerbitan,PenanggungJawab:w.penanggung_jawab,WakilPenanggungJawab:w.wakil_penanggung_jawab,Supervisor:w.pengendali_teknis,KetuaTIM:w.ketua_tim,ATim:w.anggota_tim,Jumlah:w.jumlah,Tim:w.tim,Anggaran:w.anggaran,JumlahLaporan:e,JenisLaporan:n,SaranaDanPrasarana:w.sarana_prasarana||"",TingkatRisiko:w.tingkat_risiko,Keterangan:w.keterangan}),x(),null===(a=w.tim)||void 0===a||a.forEach(a=>{j(a.name)})}},[w,y,x,j]),P)return(0,t.jsx)("div",{children:"Loading..."});if(T)return(0,t.jsxs)("div",{children:["Error: ",T.message]});let q=async a=>{try{let e={jenis_pengawasan:a.JenisPengawasan,area_pengawasan:a.AreaPengawasan,ruang_lingkup:a.RuangLingkup,tujuan_sasaran:a.TujuanSasaran,rencana_penugasan:a.RencanaPenugasan,rencana_penerbitan:a.RencanaPenerbitan,penanggung_jawab:Number(a.PenanggungJawab),wakil_penanggung_jawab:Number(a.WakilPenanggungJawab),pengendali_teknis:Number(a.Supervisor),ketua_tim:Number(a.KetuaTIM),anggota_tim:Number(a.ATim),jumlah:Number(a.Jumlah),tim:h,anggaran:a.Anggaran?Number(a.Anggaran):null,jumlah_laporan:"".concat(a.JumlahLaporan," - ").concat(a.JenisLaporan),sarana_prasarana:a.SaranaDanPrasarana||"",tingkat_risiko:a.TingkatRisiko,keterangan:a.Keterangan||null,id_user:w?w.id_user:"noSet",createdAt:w?w.createdAt:"noSet",status:w?w.status:"noSet",active:w?w.active:"noSet"},n=await m.updateData("pkpt",o,e);if(n.success)c(!1),alert("Data berhasil diperbarui"),window.location.reload();else throw Error(n.message)}catch(a){console.error("Error updating PKPT:",a),alert("Gagal memperbarui data PKPT")}},K=async()=>{if(window.confirm("Apakah Anda yakin ingin menghapus PKPT ini?"))try{let a=await m.deleteData("pkpt",o);if(a.success)alert("PKPT berhasil dihapus"),window.location.href="/dashboard/perencanaan/pkpt";else throw Error(a.message)}catch(a){console.error("Error deleting PKPT:",a),alert("Gagal menghapus PKPT")}},C=(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsxs)("label",{htmlFor:"Tim",className:"text-slate-800",children:["TIM [",h.length,"]"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:p,onChange:a=>b(a.target.value),placeholder:"Masukkan nama anggota tim",className:"border border-b-2 border-t-0 border-l-0 border-r-0 shadow-md border-slate-600 text-black bg-slate-200/25 flex-1",disabled:!n}),(0,t.jsx)("button",{onClick:a=>{a.preventDefault(),p.trim()&&(j(p.trim()),b(""))},type:"button",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-lightprimary disabled:bg-gray-400",disabled:!n,children:"Tambah"})]})]}),(0,t.jsx)("div",{className:"mt-4 space-y-2",children:h.map(a=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-slate-100 p-2 rounded-md",children:[(0,t.jsx)("span",{className:"text-slate-800",children:a.name}),n&&(0,t.jsx)("button",{onClick:()=>k(a.id),type:"button",className:"text-red-500 hover:text-red-700",children:(0,t.jsx)(d.Xm5,{})})]},a.id))})]});return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("section",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h3",{children:["Lihat PKPT (",o,")"]}),(0,t.jsxs)("div",{className:"space-x-3",children:[(0,t.jsx)("button",{onClick:K,className:"py-1 px-2 bg-red-500 text-white rounded-md shadow-md hover:bg-red-600",children:"Hapus"}),n?(0,t.jsx)("button",{onClick:f(q),className:"py-1 px-2 bg-green-500 text-white rounded-md shadow-md hover:bg-green-600",children:"Simpan"}):(0,t.jsx)("button",{onClick:()=>c(!0),className:"py-1 px-2 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600",children:"Edit"})]})]}),(0,t.jsxs)("form",{onSubmit:f(q),className:"space-y-3",children:[(0,t.jsx)(i.CardComponents,{children:(0,t.jsxs)("section",{className:"grid md:grid-cols-2 w-full gap-3",children:[(0,t.jsx)(l.qS,{label:"Jenis Pengawasan",identiti:"select-field-pengawasan",options:R,register:L("JenisPengawasan"),placeholder:"Pilih Jenis Pengawasan",disabled:!n,type:"select",name:"JenisPengawasan"}),(0,t.jsx)(l.qL,{label:"Area Pengawasan",identiti:"area",type:"text",name:"AreaPengawasan",placeholder:"Masukan Area Pengawasan",register:L("AreaPengawasan"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Ruang Lingkup",identiti:"rLingkup",type:"text",name:"RuangLingkup",placeholder:"Masukan Ruang Lingkup Pengawasan",register:L("RuangLingkup"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Tujuan / Sasaran",identiti:"tSasaran",type:"text",name:"TujuanSasaran",placeholder:"Masukan Tujuan / Sasaran pengawasan",register:L("TujuanSasaran"),disabled:!n})]})}),(0,t.jsxs)(i.CardComponents,{children:[(0,t.jsx)("h3",{children:"Jadwal Pengawasan"}),(0,t.jsxs)("section",{className:"grid md:grid-cols-2 gap-3",children:[(0,t.jsx)(l.qL,{label:"Rencana Penugasan",identiti:"rPenugasan",type:"date",name:"RencanaPenugasan",placeholder:"Tentukan rencana penugasan",register:L("RencanaPenugasan"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Rencana Penerbitan",identiti:"rPenerbitan",type:"date",name:"RencanaPenerbitan",placeholder:"Tentukan rencana Penerbitan",register:L("RencanaPenerbitan"),disabled:!n})]})]}),(0,t.jsxs)(i.CardComponents,{children:[(0,t.jsx)("h3",{children:"Hari Penugasan"}),(0,t.jsxs)("section",{className:"grid md:grid-cols-2 gap-3",children:[(0,t.jsx)(l.qL,{label:"Penanggung Jawab",identiti:"penganggungJawab",type:"number",name:"PenanggungJawab",placeholder:"Masukkan jumlah penanggung jawab",register:L("PenanggungJawab"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Wakil Penanggung Jawab",identiti:"wPenanggungJawab",type:"number",name:"WakilPenanggungJawab",placeholder:"Masukkan jumlah wakil penanggung jawab",register:L("WakilPenanggungJawab"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Pengendali Teknis/Supervisor",identiti:"pengendaliTeknis",type:"number",name:"Supervisor",placeholder:"Tentukan jumlah pengendali teknis",register:L("Supervisor"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Ketua TIM",identiti:"ketuaTim",type:"number",name:"KetuaTIM",placeholder:"Tentukan jumlah ketua tim",register:L("KetuaTIM"),disabled:!n}),(0,t.jsx)(l.qL,{label:"AnggotaTIM",identiti:"ATim",type:"number",name:"ATim",placeholder:"Masukan jumlah Anggota Tim",register:L("ATim"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Jumlah",identiti:"Jumlah",type:"number",name:"Jumlah",placeholder:"Jumlah TIM",register:L("Jumlah"),disabled:!0}),C]})]}),(0,t.jsx)(i.CardComponents,{children:(0,t.jsxs)("section",{className:"md:grid md:grid-cols-2 gap-3",children:[(0,t.jsx)(l.qL,{label:"Anggaran (Opsional)",identiti:"Anggaran",type:"number",name:"Anggaran",placeholder:"Masukan total anggaran",register:L("Anggaran"),disabled:!n}),(0,t.jsxs)("div",{className:"flex justify-start items-baseline gap-3",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(l.qL,{label:"Jumlah Laporan",identiti:"jLaporan",type:"number",name:"JumlahLaporan",placeholder:"Masukan jumlah laporan",register:L("JumlahLaporan"),disabled:!n})}),(0,t.jsx)(l.qS,{label:"Jenis Laporan",identiti:"select-field",options:R,register:L("JenisLaporan"),placeholder:"Pilih Jenis Laporan",disabled:!n,type:"select",name:"JenisLaporan"})]}),(0,t.jsx)(l.qL,{label:"Sarana dan Prasarana (Opsional)",identiti:"sPrasarana",type:"text",name:"SaranaDanPrasarana",placeholder:"Masukan Sarana dan Prasarana",register:L("SaranaDanPrasarana"),disabled:!n}),(0,t.jsx)(l.qL,{label:"Tingkat Risiko",identiti:"tRisiko",type:"text",name:"TingkatRisiko",placeholder:"Tentukan tingkat risiko",register:L("TingkatRisiko"),disabled:!n}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(l.qL,{label:"Keterangan (Opsional)",identiti:"keterangan",type:"text",name:"Keterangan",placeholder:"Masukan keterangan jika diperlukan",register:L("Keterangan"),disabled:!n})})]})})]})]})}},48357:function(a,e,n){"use strict";let t;n.d(e,{A:function(){return d}});var s=n(2265);let r=a=>{let e;let n=new Set,t=(a,t)=>{let s="function"==typeof a?a(e):a;if(!Object.is(s,e)){let a=e;e=(null!=t?t:"object"!=typeof s||null===s)?s:Object.assign({},e,s),n.forEach(n=>n(e,a))}},s=()=>e,r={setState:t,getState:s,getInitialState:()=>i,subscribe:a=>(n.add(a),()=>n.delete(a))},i=e=a(t,s,r);return r},i=a=>a?r(a):r,l=a=>a,g=a=>{let e=i(a),n=a=>(function(a,e=l){let n=s.useSyncExternalStore(a.subscribe,()=>e(a.getState()),()=>e(a.getInitialState()));return s.useDebugValue(n),n})(e,a);return Object.assign(n,e),n},d=(t=a=>({teamMembers:[],addTeamMember:e=>a(a=>({teamMembers:[...a.teamMembers,{id:Date.now().toString(),name:e}]})),removeTeamMember:e=>a(a=>({teamMembers:a.teamMembers.filter(a=>a.id!==e)})),resetTeamMembers:()=>a({teamMembers:[]})}))?g(t):g}},function(a){a.O(0,[716,9375,3972,327,2988,7699,4358,3676,9751,244,5973,3464,9501,1574,2971,2117,1744],function(){return a(a.s=89238)}),_N_E=a.O()}]);