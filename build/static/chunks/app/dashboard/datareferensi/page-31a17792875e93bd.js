(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7106],{18048:function(e,a,s){Promise.resolve().then(s.bind(s,6611)),Promise.resolve().then(s.bind(s,69291)),Promise.resolve().then(s.bind(s,82374)),Promise.resolve().then(s.bind(s,51883)),Promise.resolve().then(s.bind(s,9486)),Promise.resolve().then(s.bind(s,96053)),Promise.resolve().then(s.bind(s,63173))},27648:function(e,a,s){"use strict";s.d(a,{default:function(){return r.a}});var n=s(72972),r=s.n(n)},86134:function(e,a,s){"use strict";s.d(a,{L$:function(){return t}});var n=s(57437),r=s(49751);s(27648),s(2265);let t=e=>{let{type:a,Text:s}=e;return(0,n.jsx)(r.zx,{type:a,className:"w-full shadow-md ".concat("submit"===a?"bg-[#14ae5c] hover:bg-[#267a59]":"bg-red-800 hover:bg-red-600"," font-semibold hover:font-bold"),children:s})}},69291:function(e,a,s){"use strict";s.r(a),s.d(a,{CardAccumulate:function(){return i},CardComponents:function(){return r},CardHeaderContent:function(){return t}});var n=s(57437);s(2265);let r=e=>{let{children:a}=e;return(0,n.jsx)("div",{className:"w-full rounded-md shadow-md p-6 bg-white space-y-2 overflow-hidden",children:a})},t=e=>{let{Header:a,children:s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full rounded-md shadow-md p-6 bg-white space-y-2",children:[(0,n.jsx)("p",{children:a}),(0,n.jsx)("hr",{}),s]})})},i=e=>{let{Header:a,Count:s,imgurl:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"w-full rounded-md shadow-md p-6 bg-white space-y-2",children:(0,n.jsxs)("div",{className:"flex",children:[r&&(0,n.jsx)("img",{src:r,className:"w-8 md:w-10"}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{className:"text-left md:text-4xl text-2xl font-black text-teal-500",children:s}),(0,n.jsx)("h3",{className:"text-neutral-500 text-sm md:text-base",children:a})]})]})})})}},41954:function(e,a,s){"use strict";s.d(a,{qL:function(){return t},qS:function(){return i},ul:function(){return l}});var n=s(57437),r=s(49751);s(2265);let t=e=>{let{label:a,identiti:s,type:t,name:i,placeholder:l,register:d,error:c,disabled:o=!1}=e;return(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsx)("label",{htmlFor:s,className:"text-slate-800",children:a}),(0,n.jsx)(r.oi,{id:s,type:t,placeholder:l,...d,disabled:o,className:"form-control form-rounded-xl flex-1"}),c&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:c.message})]})},i=e=>{let{label:a,identiti:s,options:t,register:i,error:l,placeholder:d,disabled:c=!1}=e;return(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsx)("label",{htmlFor:s,className:"text-slate-800",children:a}),(0,n.jsxs)(r.Ph,{id:s,...i,disabled:c,className:"select-rounded",children:[(0,n.jsx)("option",{value:"",disabled:!0,children:d}),t.map(e=>(0,n.jsx)("option",{value:e.value,children:e.title},e.value))]}),l&&(0,n.jsx)("span",{className:"text-red-500 font-semibold",children:l.message})]})},l=e=>{let{label:a,identiti:s,placeholder:r,register:t,error:i,disabled:l=!1,rows:d=4}=e;return(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsx)("label",{htmlFor:s,className:"text-slate-800",children:a}),(0,n.jsx)("textarea",{id:s,placeholder:r,...t,disabled:l,rows:d,className:"border border-b-2 rounded-[8px] shadow-md border-slate-600  \n          ".concat(l?"bg-gray-100 text-[#b3b3b3]":"bg-white/50 text-black"," \n          ").concat(i?"border-red-500":"")}),i&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:i.message})]})}},82374:function(e,a,s){"use strict";var n=s(57437),r=s(86134),t=s(69291),i=s(41954);s(2265);var l=s(29501),d=s(65596),c=s(16929),o=s(20295);let u=new d.C;new c.g,a.default=()=>{let{data:e,isLoading:a,error:s,refetch:d}=(0,o.i)("/jenis_laporan"),{register:c,handleSubmit:g,reset:m,formState:{errors:h}}=(0,l.cI)({defaultValues:{jenis_laporan:"",keterangan:""}});if(a)return(0,n.jsx)("div",{children:"Loading..."});if(s)return(0,n.jsxs)("div",{children:["Error: ",s.message]});let p=async e=>{try{let a=await u.addData("jenis_laporan",{jenis_laporan:e.jenis_laporan,keterangan:e.keterangan,createdAt:new Date});if(a.success)console.log("Jenis Laporan berhasil disimpan:",a),m(),alert("Data Jenis Laporan berhasil disimpan"),d();else throw Error(a.message)}catch(e){console.error("Error submitting form:",e),alert("Gagal menyimpan data Jenis Laporan")}},x=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus jenis laporan ini?"))try{let a=await u.deleteData("jenis_laporan",e.toString());if(a.success)alert("Jenis Laporan berhasil dihapus"),d();else throw Error(a.message)}catch(e){console.error("Error deleting jenis laporan:",e),alert("Gagal menghapus jenis laporan")}};return(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"text-xl",children:"# Jenis Laporan"}),(0,n.jsx)(t.CardComponents,{children:(0,n.jsxs)("form",{onSubmit:g(p),className:"grid grid-cols-3 gap-3 w-full",children:[(0,n.jsx)(i.qL,{label:"Jenis laporan",identiti:"jenis_laporan",name:"jenis_laporan",placeholder:"Tuliskan Jenis Laporan",type:"text",register:c("jenis_laporan",{required:"Jenis laporan wajib diisi"}),error:h.jenis_laporan}),(0,n.jsx)("div",{className:"col-span-2",children:(0,n.jsx)(i.qL,{label:"Keterangan",identiti:"keterangan",name:"keterangan",placeholder:"Tuliskan Keterangan",type:"text",register:c("keterangan",{required:"Keterangan wajib diisi"}),error:h.keterangan})}),(0,n.jsx)("div",{className:"col-span-3",children:(0,n.jsx)(r.L$,{Text:"+ Simpan Jenis Laporan",type:"submit"})})]})}),(0,n.jsx)("section",{className:"grid grid-cols-2 gap-3",children:e.map(e=>(0,n.jsxs)(t.CardComponents,{children:[(0,n.jsxs)("h3",{className:"text-xl font-bold",children:[">>"," ",e.jenis_laporan]}),(0,n.jsx)("button",{onClick:()=>x(e.id),className:"py-2 text-center w-full rounded-md shadow-md bg-red-500 hover:bg-red-700 text-white font-semibold",children:"Hapus"})]},e.id))})]})}},51883:function(e,a,s){"use strict";var n=s(57437),r=s(86134),t=s(69291),i=s(41954);s(2265);var l=s(29501),d=s(16929),c=s(20295);let o=new d.g;a.default=()=>{let{data:e,isLoading:a,error:s,refetch:d}=(0,c.i)("/jenis_pengawasan"),{register:u,handleSubmit:g,reset:m,formState:{errors:h}}=(0,l.cI)({defaultValues:{jenis_pengawasan:""}});if(a)return(0,n.jsx)("div",{children:"Loading..."});if(s)return(0,n.jsxs)("div",{children:["Error: ",s.message]});if(!e||0===e.length)return(0,n.jsx)("div",{children:"No data available"});let p=async e=>{try{console.log("Data yang dikirim:",e);let a=await o.addData("/jenis_pengawasan",{jenis_pengawasan:e.jenis_pengawasan});if(console.log("Respons dari server:",a),a.success)console.log("Jenis Pengawasan berhasil disimpan:",a),m(),alert("Data Jenis Pengawasan berhasil disimpan"),d();else throw Error(a.message)}catch(e){console.error("Error submitting form:",e),alert("Gagal menyimpan data Jenis Pengawasan")}},x=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus jenis pengawasan ini?"))try{let a=await o.deleteData("/jenis_pengawasan/".concat(e));if(a.success)alert("Jenis Pengawasan berhasil dihapus"),d();else throw Error(a.message)}catch(e){console.error("Error deleting jenis pengawasan:",e),alert("Gagal menghapus jenis pengawasan")}};return(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"text-xl",children:"# Jenis Pengawasan"}),(0,n.jsx)(t.CardComponents,{children:(0,n.jsxs)("form",{onSubmit:g(p),className:"grid gap-3",children:[(0,n.jsx)(i.qL,{label:"Jenis Pengawasan",identiti:"jenis_pengawasan",name:"jenis_pengawasan",placeholder:"Tuliskan Jenis Pengawasan",type:"text",register:u("jenis_pengawasan",{required:"Jenis Pengawasan wajib diisi"}),error:h.jenis_pengawasan}),(0,n.jsx)(r.L$,{Text:"+ Simpan Jenis Pengawasan",type:"submit"})]})}),(0,n.jsx)("section",{className:"grid grid-cols-2 gap-3",children:e.map(e=>(0,n.jsxs)(t.CardComponents,{children:[(0,n.jsxs)("h3",{className:"text-xl font-bold",children:[">>"," ",e.jenis_pengawasan]}),(0,n.jsx)("button",{onClick:()=>x(e.id),className:"py-2 text-center w-full rounded-md shadow-md bg-red-500 hover:bg-red-700 text-white font-semibold",children:"Hapus"})]},e.id))})]})}},9486:function(e,a,s){"use strict";var n=s(57437);s(2265),a.default=()=>(0,n.jsx)("div",{children:"KodeTemuan"})},96053:function(e,a,s){"use strict";var n=s(57437),r=s(86134),t=s(69291),i=s(41954);s(2265);var l=s(29501),d=s(65596),c=s(16929),o=s(20295);let u=new d.C,g=new c.g;a.default=()=>{let{data:e,isLoading:a,error:s,refetch:d}=(0,o.i)("/ruang_lingkup"),{register:c,handleSubmit:m,reset:h,formState:{errors:p}}=(0,l.cI)({defaultValues:{ruang_lingkup:""}});if(a)return(0,n.jsx)("div",{children:"Loading..."});if(s)return(0,n.jsxs)("div",{children:["Error: ",s.message]});let x=async e=>{try{let a=await u.addData("ruang_lingkup",{ruang_lingkup:e.ruang_lingkup});if(a.success)console.log("Ruang Lingkup berhasil disimpan:",a),h(),alert("Data Ruang Lingkup berhasil disimpan"),d();else throw Error(a.message)}catch(e){console.error("Error submitting form:",e),alert("Gagal menyimpan data Jenis Pengawasan")}},b=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus ruang lingkup ini?"))try{let e=await g.deleteData("/rusn");if(e.success)alert("Ruang Lingkup berhasil dihapus"),d();else throw Error(e.message)}catch(e){console.error("Error deleting ruang lingkup:",e),alert("Gagal menghapus ruang lingkup")}};return(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"text-xl",children:"# Ruang Lingkup"}),(0,n.jsx)(t.CardComponents,{children:(0,n.jsxs)("form",{onSubmit:m(x),className:"grid gap-3",children:[(0,n.jsx)(i.qL,{label:"Ruang Lingkup",identiti:"ruang_lingkup",name:"ruang_lingkup",placeholder:"Tuliskan Ruang Lingkup",type:"text",register:c("ruang_lingkup",{required:"Ruang Lingkup wajib diisi"}),error:p.ruang_lingkup}),(0,n.jsx)(r.L$,{Text:"+ Simpan Ruang Lingkup",type:"submit"})]})}),(0,n.jsx)("section",{className:"grid grid-cols-2 gap-3",children:e.map(e=>(0,n.jsxs)(t.CardComponents,{children:[(0,n.jsxs)("h3",{className:"text-xl font-bold",children:[">>"," ",e.ruang_lingkup]}),(0,n.jsx)("button",{onClick:()=>b(e.id),className:"py-2 text-center w-full rounded-md shadow-md bg-red-500 hover:bg-red-700 text-white font-semibold",children:"Hapus"})]},e.id))})]})}},63173:function(e,a,s){"use strict";var n=s(57437),r=s(86134),t=s(69291),i=s(41954);s(2265);var l=s(29501),d=s(65596),c=s(29889),o=s(16929);let u=new d.C,g=new o.g;a.default=()=>{let{data:e,isLoading:a,error:s,refetch:d}=(0,c.i)("tingkat_resiko"),{register:o,handleSubmit:m,reset:h,formState:{errors:p}}=(0,l.cI)({defaultValues:{tingkat_resiko:""}});if(a)return(0,n.jsx)("div",{children:"Loading..."});if(s)return(0,n.jsxs)("div",{children:["Error: ",s.message]});let x=async e=>{try{let a=await g.addData("/tingkat_resiko",{tingkat_resiko:e.tingkat_resiko});if(a.success)console.log("Ruang Lingkup berhasil disimpan:",a),h(),alert("Data Ruang Lingkup berhasil disimpan"),d();else throw Error(a.message)}catch(e){console.error("Error submitting form:",e),alert("Gagal menyimpan data Jenis Pengawasan")}},b=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus ruang lingkup ini?"))try{let a=await u.deleteData("jenis_pengawasan",e);if(a.success)alert("Ruang Lingkup berhasil dihapus"),d();else throw Error(a.message)}catch(e){console.error("Error deleting ruang lingkup:",e),alert("Gagal menghapus ruang lingkup")}};return(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"text-xl",children:"# Tingkat Resiko"}),(0,n.jsx)(t.CardComponents,{children:(0,n.jsxs)("form",{onSubmit:m(x),className:"grid gap-3",children:[(0,n.jsx)(i.qL,{label:"Tingkat Resiko",identiti:"tingkat_resiko",name:"tingkat_resiko",placeholder:"Tuliskan Tingkat Resiko",type:"text",register:o("tingkat_resiko",{required:"Tingkat Resiko wajib diisi"}),error:p.tingkat_resiko}),(0,n.jsx)(r.L$,{Text:"+ Simpan Tingkat Resiko",type:"submit"})]})}),(0,n.jsx)("section",{className:"grid grid-cols-2 gap-3",children:e.map(e=>(0,n.jsxs)(t.CardComponents,{children:[(0,n.jsxs)("h3",{className:"text-xl font-bold",children:[">>"," ",e.tingkat_resiko]}),(0,n.jsx)("button",{onClick:()=>b(e.id),className:"py-2 text-center w-full rounded-md shadow-md bg-red-500 hover:bg-red-700 text-white font-semibold",children:"Hapus"})]},e.id))})]})}},29889:function(e,a,s){"use strict";s.d(a,{i:function(){return t}});var n=s(2265);let r=new(s(16929)).g,t=e=>{let[a,s]=(0,n.useState)([]),[t,i]=(0,n.useState)(!0),[l,d]=(0,n.useState)(null),c=(0,n.useCallback)(async()=>{try{i(!0);let a=await r.getAllData(e);a.success&&Array.isArray(a.data)?(s(a.data),d(null)):d(Error(a.message))}catch(e){d(e)}finally{i(!1)}},[e]);return(0,n.useEffect)(()=>{c()},[c]),{data:a,isLoading:t,error:l,refetch:c}}},20295:function(e,a,s){"use strict";s.d(a,{i:function(){return t}});var n=s(2265);let r=new(s(16929)).g,t=e=>{let[a,s]=(0,n.useState)([]),[t,i]=(0,n.useState)(!0),[l,d]=(0,n.useState)(null),c=(0,n.useCallback)(async()=>{try{i(!0);let a=await r.getAllData(e);console.log("Raw API Response:",a),a.success&&Array.isArray(a.data)?(s(a.data),d(null)):d(Error(a.message))}catch(e){d(e)}finally{i(!1)}},[e]);return(0,n.useEffect)(()=>{c()},[c]),{data:a,isLoading:t,error:l,refetch:c}}},16929:function(e,a,s){"use strict";s.d(a,{g:function(){return l}});var n=s(83464),r=s(40257);let t="http://simwas.tasikmalayakota.go.id:8080";if(!t)throw Error("NEXT_PUBLIC_API_ENDPOINT is not defined in environment variables.");let i=n.Z.create({baseURL:t,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let a=r.env.NEXT_SECRET_API_TOKEN;return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e.data,e=>{var a;return Promise.reject((null===(a=e.response)||void 0===a?void 0:a.data)||e.message||"An unknown error occurred")});class l{async getAllData(e){try{let a=await i.get(e);return{success:!0,data:a,message:"Data berhasil diambil"}}catch(e){return{success:!1,error:e,message:"Gagal mengambil data"}}}async addData(e,a){try{let s=await i.post(e,a);return{success:!0,data:s,message:"Data berhasil ditambahkan"}}catch(e){return{success:!1,error:e,message:"Gagal menambahkan data"}}}async updateData(e,a){try{let s=await i.put(e,a);return{success:!0,data:s,message:"Data berhasil diupdate"}}catch(e){return{success:!1,error:e,message:"Gagal mengupdate data"}}}async deleteData(e){try{let a=await i.delete(e);return{success:!0,data:a,message:"Data berhasil dihapus"}}catch(e){return{success:!1,error:e,message:"Gagal menghapus data"}}}async getDataById(e){try{let a=await i.get(e);return{success:!0,data:a.data,message:"Data berhasil diambil"}}catch(e){return{success:!1,error:e,message:"Gagal mengambil data"}}}}},65596:function(e,a,s){"use strict";s.d(a,{C:function(){return l}});var n=s(738),r=s(5978);let t=(0,n.ZF)({apiKey:"AIzaSyDqZ4Ec9UxT19VwkimUfntAG2BGXpB_NgY",authDomain:"simwas-43d36.firebaseapp.com",projectId:"simwas-43d36",storageBucket:"simwas-43d36.firebasestorage.app",messagingSenderId:"347853228552",appId:"1:347853228552:web:85ba82ba8b9cbcf6989fbd",measurementId:"G-S4YKFSE74R"}),i=(0,r.ad)(t);class l{async addData(e,a){try{let s=await (0,r.ET)((0,r.hJ)(i,e),a);return{success:!0,id:s.id,message:"Data berhasil ditambahkan"}}catch(e){return{success:!1,error:e,message:"Gagal menambahkan data"}}}async getAllData(e){try{let a=(await (0,r.PL)((0,r.hJ)(i,e))).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:a,message:"Data berhasil diambil"}}catch(e){return{success:!1,error:e,message:"Gagal mengambil data"}}}async updateData(e,a,s){try{let n=(0,r.JU)(i,e,a);return await (0,r.r7)(n,s),{success:!0,message:"Data berhasil diupdate"}}catch(e){return{success:!1,error:e,message:"Gagal mengupdate data"}}}async deleteData(e,a){try{return await (0,r.oe)((0,r.JU)(i,e,a)),{success:!0,message:"Data berhasil dihapus"}}catch(e){return{success:!1,error:e,message:"Gagal menghapus data"}}}async getDataById(e,a){try{let s=(0,r.JU)(i,e,a),n=await (0,r.QT)(s);if(n.exists())return{success:!0,data:{id:n.id,...n.data()}};return{success:!1,message:"Data tidak ditemukan"}}catch(e){return{success:!1,error:e,message:"Gagal mengambil data"}}}async getDataByField(e,a,s,n){try{let t=(0,r.hJ)(i,e),l=(0,r.IO)(t,(0,r.ar)(a,s,n)),d=(await (0,r.PL)(l)).docs.map(e=>({id:e.id,...e.data()}));return{success:!0,data:d,total:d.length}}catch(e){return{success:!1,error:e,message:"Gagal mengambil data"}}}}}},function(e){e.O(0,[716,9375,3972,327,2988,4358,2972,3676,9751,244,5973,3464,9501,4381,6611,2971,2117,1744],function(){return e(e.s=18048)}),_N_E=e.O()}]);